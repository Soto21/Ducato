<div class="ducato-container">
    <img src="images/ducato-top.jpg" class="ducato-image" />

    @for (int i = 0; i < SeatPositions.Length; i++)
    {
        <div class="seat-label" style="top:@SeatPositions[i].Top%; left:@SeatPositions[i].Left%;">
            <div class="emoji">@Passengers[i].Emoji</div>
            <div class="name">@Passengers[i].Name</div>
        </div>
    }

    <div class="controls">
        <button @onclick="RotateSeatsBackward">⏪ Anterior</button>
        <button @onclick="RotateSeatsForward">⏩ Siguiente</button>
    </div>
</div>

@code {
    private record Passenger(string Emoji, string Name);

    private Passenger[] Passengers = new[]
    {
        new Passenger("👶✈️", "Horselillo"), // Fijo
        new Passenger("🧔", "Andrea"),
        new Passenger("👨", "Alex"),
        new Passenger("🧕", "Aysha"),
        new Passenger("🧓", "José"),
        new Passenger("👱‍♀️", "Sophie"),
        new Passenger("👦", "Darío"),
        new Passenger("👩‍🎤", "Marta"),
        new Passenger("👨‍🦱", "Carlos")
    };

    private (double Top, double Left)[] SeatPositions = new[]
    {
    (35.0, 31.0), // 🚐 Conductor (fijo, no rota)

    (35.0, 50.0), // 1
    (35.0, 68.0), // 2

    (50.0, 31.0), // 3
    (50.0, 50.0), // 4
    (50.0, 68.0), // 5

    (68.0, 31.0), // 6
    (68.0, 50.0), // 7
    (68.0, 68.0), // 8
};

    private void RotateSeatsForward()
    {
        var current = Passengers[1..];
        var newSeats = new Passenger[8];

        newSeats[2] = current[0]; // 1 -> 3
        newSeats[5] = current[1]; // 2 -> 6
        newSeats[1] = current[4]; // 5 -> 2
        newSeats[0] = current[7]; // 8 -> 1
        newSeats[3] = current[2]; // 3 -> 4
        newSeats[4] = current[3]; // 4 -> 5
        newSeats[6] = current[5]; // 6 -> 7
        newSeats[7] = current[6]; // 7 -> 8

        Passengers = [Passengers[0], .. newSeats];
    }

    private void RotateSeatsBackward()
    {
        var current = Passengers[1..];
        var newSeats = new Passenger[8];

        newSeats[0] = current[2]; // 3 -> 1
        newSeats[1] = current[5]; // 6 -> 2
        newSeats[4] = current[1]; // 2 -> 5
        newSeats[7] = current[0]; // 1 -> 8
        newSeats[2] = current[3]; // 4 -> 3
        newSeats[3] = current[4]; // 5 -> 4
        newSeats[5] = current[6]; // 7 -> 6
        newSeats[6] = current[7]; // 8 -> 7

        Passengers = [Passengers[0], .. newSeats];
    }
}
